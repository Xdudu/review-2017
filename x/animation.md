## 动一动，更健康
---

还记得去年这个时候，刚学习前端没多久，动画对我来说就是一片完全神秘的领地。clone下来create-react-app时，一个简单的keyframes动画都令我觉得神奇不已。回想今年的工作中，一共做了5种不同类型的动画，第一个是因为自己想要尝试而“创造”出的需求，第二个是部门领导看我有热情带领大家做的练习，第三个是自己主动要求改善交互而做的，后面两个貌似是产品看我好像挺爱接动画的“锅”，就这么给我做了~回头再想想做这些动画的过程，还是蛮开心的，我也在一步步猎奇的过程中不那么恐惧动画了，可以在本来就紧张的开发周期中从容地去构思一个合理、流畅的动画。


### 一、神秘地初探——@keyframes
来到公司不久，接到了一个落地页面的任务，里边有一个引导下载的按钮，UI效果大概是这样：

![ui效果图](images/animation/flowing-arrow-ui.png)

看到效果图的时候，觉得箭头如果能流动起来，就可以更好地吸引用户注意而达到引导的效果。算是自己给自己派发的一个额外需求吧~

首先，我脑补了一下这个动画的效果：仿佛闪亮的箭头拖着箭羽一支支地从你窗前射过。描述好像有点尬==呃，那么关键就在于**周期性**和3个箭头**明暗度**的控制了。如果每个箭头在亮度 **高**、**中**、**低** 3档中间变化，那么实现箭射过效果最简单的方法，就是让高亮度依次出现在左、中、右3个箭头上；配合上中、低亮度的依次出现，整个箭头就有了从左至右“流动”起来的感觉。中间再加一点**间隔时间**的话，效果更好。以其中一个箭头关键帧的代码段为例：
``` css
@keyframes arrow-2 {
    0% { border-color: rgba(255, 255, 255, .5) }
    25% { border-color: rgba(255, 255, 255, .15) }
    75% { border-color: rgba(255, 255, 255, .15) }
    87.5% { border-color: rgba(255, 255, 255, .8) }
    100% { border-color: rgba(255, 255, 255, .5) }
}
```
可以看到低亮度[rgba(255, 255, 255, .15)]的帧数占比是最大的。设定一个动画周期内有8帧，这个时间间隔占到了3帧，其余帧数用于模拟箭的流动性。以 *3*，*2*，*1* 分别表示亮度的递减，f_${i}表示第i帧，下表展示了一个周期内三个箭头明暗度变化的情况：

|     | 箭头左 | 箭头中 | 箭头右 |
| --- | --- | --- | --- |
| f_1 | 1 | 2 | 3 |
| f_2 | 1 | 2 | 2 |
| f_3 | 1 | 1 | 2 |
| f_4 | 1 | 1 | 1 |
| f_5 | 1 | 1 | 1 |
| f_6 | 1 | 1 | 1 |
| f_7 | 3 | 1 | 1 |
| f_8 | 2 | 3 | 1 |

:disappointed_relieved: 好像还是比较难描述帧的设计呢。你可以想象把每一帧的动画依次画在一个本子的右下角，然后根据翻动本子所看到的样子去列表，再将每帧写进@keyframes，就ok了~需要注意的是@keyframes关键帧之间的变化是线性而非阶梯的，所以对于类似**箭头中**这样2->2->1->1->1->1->1->3的变化，你需要在第7帧也指定亮度为1，而不要偷懒直接写：
 ``` css
 @keyframes arrow-2 {
    0% { border-color: rgba(255, 255, 255, .5) }
    25% { border-color: rgba(255, 255, 255, .15) }  /* 第2帧，亮度1 */
    87.5% { border-color: rgba(255, 255, 255, .8) }  /* 第8帧，亮度3 */
    100% { border-color: rgba(255, 255, 255, .5) }
}
 ```
这样会直接从第2帧的低亮度渐变到第8帧的高亮度，从而破坏了我们设计的第4—6帧的时间间隔，也没有了流动的感觉。这也是整个动画的关键所在。你可以试着注释掉我下面给出地址的源码中3个箭头对应的这一关键帧定义，所得到的动画效果是非常差强人意的。

最终效果我觉得还挺棒的，ui小姐姐对还原度的时候她惊讶的说，哇原来你们也能做这个，我都没有要求这里。。吼吼，源码在这里，感兴趣的读者可以戳去codepen看看效果——[Flowing Arrow](https://codepen.io/xiaodudu/pen/GyNKKL?editors=0100)

### 二、让选择题做起来更优雅一些